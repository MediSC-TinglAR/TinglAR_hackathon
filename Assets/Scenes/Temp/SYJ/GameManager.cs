using TMPro;
using UnityEngine;
using UnityEngine.SceneManagement;


// ???? ???? ???¢¨? ??????, ???? ?????? UI?? ??????? ???? ?????
// ?????? ?? ????? ???? ??????? ?????? ?? ???.
public class GameManager : MonoBehaviour
{
    public static GameManager instance; // ??????? ????? ???? ????

    public bool isGameover = false; // ???? ???? ????
    public TMP_Text scoreText; // ?????? ????? UI ????

    public bool isLevelUp = false;
    public bool isInGame = false;

    public int score = 0; // ???? ????
    public GameObject[] characters;

    // ???? ????? ????? ??????? ????
    void Awake()
    {
        // ????? ???? instance?? ?????°∆??
        if (instance == null)
        {
            // instance?? ???????(null) ????? ??? ????? ???
            instance = this;
            DontDestroyOnLoad(this.gameObject);
        }
        else
        {
            // instance?? ??? ??? GameManager ????????? ????? ??? ???
            // ???? ??? ????? GameManager ????????? ???????? ???.
            // ????? ????????? ????? ??????? ???? ????? ???? ????????? ?©•?
            Debug.LogWarning("???? ??? ????? ???? ??????? ????????!");
            Destroy(gameObject);
        }

    }

    private void Start()
    {
        // if (isLevelUp)
        //     characters[1].SetActive(true);
        // else
        //     characters[0].SetActive(false);
    }

    // ?????? ????????? ?????
    public void AddScore(int newScore)
    {
        // if (isGameover)
        // {
            score += newScore;
            //scoreText.text = score.ToString();
        // }
    }
    // ???? ?????? ??????? ?????
    public void OnPlayerDead()
    {
        isGameover = true;
    }


    // ???? ?????? ?????? ?????
    public void LoadNextScene()
    {
        int currentSceneIndex = SceneManager.GetActiveScene().buildIndex;
        SceneManager.LoadScene(currentSceneIndex + 1);
    }

    // ???? ???????? ?????
    public void RestartGame()
    {
        SceneManager.LoadScene(0); // 0?? ???? ???? ???? ?•Â???????. ??„· ???? ?????????.
        score = 0; // ?????? ??????? ?? ???? ????
    }
}